extends ../layout

block content
    form(action="/expense/new" method='POST' id='add-transaction-parent' class='transaction-menu')
        div(class='window-header')
            h2 Nuevo Gasto 
        div(class='window-container')
            div(id='amount-field' class='transaction-field')
                label(for="amount") Cantidad:
                div(id='amount-input')
                    p -
                    input(<input type="number" name='amount' id='amount' min='0' step="0.01" oninput="limitDecimalPlaces(event, 2)" placeholder="0.00" required)
                    script.
                        function limitDecimalPlaces(event, decimalPlaces) {
                            const value = event.target.value;
                            if (value.includes('.')) {
                                const [integerPart, decimalPart] = value.split('.');
                                if (decimalPart.length > decimalPlaces) {
                                    event.target.value = `${integerPart}.${decimalPart.slice(0, decimalPlaces)}`;
                                }
                            }
                        }
                    p &euro;
            div(id='date-time-field' class='transaction-field')
                label(for="date-time") Fecha:
                input(type="datetime-local" id="datetime" name="datetime" required)
            div(id='expense-type-field' class='transaction-field')
                label(for="type_id") Categoria:
                select( id="expense-type" name="type_id")
                    each type in types 
                        option(class="type-option", value=type.id)= type.name 
            div(id='title-field' class='transaction-field')
                label(for="title") Titulo:      
                input(type="text" id="title" name="title" maxlength="50" placeholder='Titulo' required  )
            div(id='comment-field' class='transaction-field')
                label(for="comment") Comentario:      
                textarea(id='comment-field' class='transaction-field' name="comment" rows="4" cols="50" maxlength="200" placeholder='Comentario')
            div(id='submits_field' class='transaction-field')
                input(type="submit"  value='Cancelar')
                input(type="submit"  value='AÃ±adir Gasto')